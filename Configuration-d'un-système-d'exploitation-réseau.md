
# Kapitel 2: Einrichten eines Netzwerkbetriebssystems

Jede Maschine benötigt ein Betriebssystem, um zu funktionieren, einschließlich Netzwerkmaschinen. Wir werden hier die Cisco-Netzwerkbetriebssysteme sehen, die auch als IOS bezeichnet werden.

## Betriebssystem

Das Betriebssystem ist das Bindeglied zwischen dem Benutzer und der Hardware. Es besteht aus einer grafischen (Windows-basierten) oder Befehlszeilenschnittstelle (Textinterpreter). Und einen Kernel, der die Verbindung zwischen der Schnittstelle und der Hardware herstellt.

##IOS

### Zugang

Um auf das IOS-System zuzugreifen, können Sie mehrere Methoden verwenden, jede mit ihren Vor- und Nachteilen.

* **Konsole** Ein physischer Systemverwaltungsport, auf den außerhalb des Netzwerks zugegriffen werden kann und der für die Gerätewartung nützlich ist. Er verwendet ein spezielles Kabel
* **SSH (Secure Shell)** ermöglicht eine Remote-Verbindung zum System
* **Telnet** Unsichere Zugangsmethode, alle Passwörter und Befehle werden im Klartext übertragen
* **AUX** Alter Port über Telefonanschluss und zu administrierendes Modem

### Befehlsmodi

Es gibt zwei Hauptsteuerungsmodi, die es dem Benutzer ermöglichen, mehr oder weniger Aktionen auszuführen.

* **Benutzermodus** sichtbar durch die Eingabeaufforderung `>`, erlaubt eingeschränkte Überwachungsaktionen, verhindert jedoch jegliche Änderung der Konfiguration.
* **Privilegierter Modus** sichtbar durch die `#`-Eingabeaufforderung, die verwendet wird, um Router-Wartungs- und -Konfigurationsvorgänge durchzuführen. Sie gelangen in diesen Modus durch den Befehl „enable“ aus dem Benutzermodus
* **Konfigurationsmodus** sichtbar durch die Eingabeaufforderung „(config)#“ und zugänglich über den privilegierten Modus, in dem die Gerätekonfiguration geändert werden kann. In diesen Modus gelangen Sie mit dem Befehl `configure terminal`
* **Leitungskonfigurationsmodus** sichtbar durch die Eingabeaufforderung `(config-line)#` und zugänglich durch den Konfigurationsmodus, erlaubt es, die Konfiguration der Zugangskonsole, ssh oder telnet zu ändern. Diesen Modus betreten wir mit dem Befehl `line`
* **Schnittstellen-Konfigurationsmodus** sichtbar durch die `(config-if)#`-Eingabeaufforderung und zugänglich vom Konfigurationsmodus, ermöglicht es, die Konfiguration in Bezug auf die Netzwerkschnittstellen zu ändern. In diesen Modus gelangen Sie mit dem Befehl `interface`

### Befehlsstruktur

Ein IOS-Befehl besteht aus mehreren Elementen:

![Eingabeaufforderung> Befehlsargumente](./img/command.png)

IOS implementiert Hilfefunktionen, auf die jederzeit über den Befehl „?“ zugegriffen werden kann. Auch bei Eingabe einer falschen Syntax werden Sie im Gast darauf hingewiesen.

### Tastatürkürzel

Beim Bearbeiten einer Bestellung

|Schlüssel|Beschreibung|
|------|-----------|
|`Tab`|Vervollständigen Sie den Namen des Befehls|
|`STRG+D`|Zeichen an Cursorposition löschen|
|`STRG+K`|Alle Zeichen bis zum Zeilenende löschen|
|`Esc+D`|Lösche alle Zeichen vom Cursor bis zum Ende des Wortes|
|`CTRL+U` `CTRL+X`|Alle Zeichen bis zum Zeilenanfang löschen|
|`CTRL+W`|Lösche das Wort links vom Cursor|
|`CTRL+A`|Cursor zum Zeilenanfang bewegen|
|`CTRL+E`|Cursor zum Zeilenende bewegen|
|`Esc+B`|Bewegt den Cursor um ein Wort nach links|
|`Esc+F`|Bewege den Cursor um ein Wort nach rechts|
|`STRG+R`|Eingabeaufforderung zurückrufen|

|Schlüssel|Beschreibung|
|------|-----------|
|`CTRL+C`|Konfigurationsmodus verlassen|
|`CTRL+SHIFT+6`|DNS-Suche, Traceroute oder Ping-Befehl unterbrechen|

Während eines Gastspiels "Mehr"

|Schlüssel|Beschreibung|
|------|-----------|
|`Enter`|Eine Zeile weiter|
|`Leertaste`|Seite vor|
|Andere Sache|Verlässt die "Mehr"-Ansicht|

### Gerätename

Der Gerätename wird verwendet, um ein Gerät im Netzwerk zu erkennen. Dieser Name muss:

* Beginnen Sie mit einem Buchstaben
* Keine Leerzeichen enthalten
* Beenden Sie mit einem Buchstaben oder einer Zahl
* Darf keine Buchstaben, Zahlen und Bindestriche enthalten
* Seien Sie weniger als 64 Zeichen

Um den Gerätenamen (Hostname) zu konfigurieren, muss im Konfigurationsmodus der Befehl „hostname“ gefolgt vom neuen Gerätenamen verwendet werden.

> Beispiel:
> ```
> Switch # Terminal konfigurieren
> Switch(config)# Hostname SW-Etage-1
> SW-Etage-1(config)#
> ```

Änderungen können mit `no hostname` rückgängig gemacht werden.

### Sicherheit

IOS-Systeme erlauben die folgenden Aktionen, um die Hardware zu sichern:

* Fügen Sie dem privilegierten EXEC-Modus ein Passwort hinzu
* Benutzermodus-Passwort hinzufügen
* Fügen Sie ein Passwort hinzu, wenn Sie aus der Ferne zugreifen
* Passwörter verschlüsseln
* Rechtlichen Hinweis hinzufügen

#### Passwörter

Ein Passwort wird hinzugefügt, wenn auf den privilegierten Ausführungsmodus mit dem Befehl „enable secret“ gefolgt von dem Passwort zugegriffen wird. Dieser Befehl muss im globalen Konfigurationsmodus ausgeführt werden.

Wir fügen ein Passwort während des Benutzerzugriffs mit dem Befehl „password“ gefolgt vom Passwort hinzu. Dieser Befehl muss im Online-Konfigurationsmodus (`line console 0`) ausgeführt werden. Anschließend aktivieren wir die Authentifizierung mit dem Befehl `login` (kann mit `no login` deaktiviert werden).

Sie können dasselbe für den Fernzugriff über Telnet oder ssh tun, indem Sie dieselben Befehle wie zuvor verwenden, jedoch im vty-Konfigurationsmodus (`line vty 0 15`).

Die Passwörter werden dann im Klartext in die startup-config- und running-config-Dateien geschrieben, was ein Sicherheitsproblem darstellen kann. Um die Passwortverschlüsselung zu aktivieren, können Sie den Befehl „service password-encryption“ im globalen Konfigurationsmodus verwenden.

#### Rechtsmitteilung

Um vor dem privaten Aspekt des Materials zu warnen, können Sie ein Banner einrichten, das bei jeder Verbindung angezeigt wird. Dazu verwenden wir den Befehl `banner motd #
   
    #`. Wir schreiben dann die Nachricht zwischen das `#`.

### Konfigurationsdateien

Auf dem IOS-System gibt es zwei Konfigurationsdateien:

* **startup-config** Die Konfiguration im RAM und nichtflüchtigen Speicher, die es ermöglicht, dass sie trotz Herunterfahren des Systems beibehalten wird.
* **running-config** Eine vom System verwendete Kopie der startup-config. Diese Konfiguration wird zurückgesetzt, wenn die Maschine neu gestartet wird.

Um eine der beiden Konfigurationen anzuzeigen, verwenden Sie den Befehl „show“, gefolgt vom Namen der anzuzeigenden Konfiguration.

Um die aktuelle Konfiguration im Speicher zu speichern und somit diese Konfiguration zu persistieren, verwenden wir den Befehl „copy running-config startup-config“.

Wenn gerade eine unerwünschte Konfiguration hinzugefügt wurde, können Sie mit dem Befehl „reload“ das Gerät neu laden und so zur Startup-Config-Konfiguration zurückkehren. Im schlimmsten Fall können Sie die initiale Konfiguration mit `erase startup-config` löschen. Dadurch wird die Konfiguration beim nächsten Neuladen auf den ursprünglichen Zustand zurückgesetzt.

## IP Adresse

Eine IP-Adresse ist das wichtigste Werkzeug für Geräte, um sich gegenseitig zu finden. Eine IP-Adresse besteht aus 4 Zahlen von 0 bis 255, die durch Punkte getrennt sind.

Jedem physischen Port und jeder virtuellen Schnittstelle von Cisco-Geräten kann eine IP-Adresse zugewiesen werden.

### Schnittstelle

Eine Schnittstelle ist die Verbindung zwischen der Hardware der Maschine und dem Netzwerkmedium. Wir stellen eine Schnittstelle oft als physikalischen Ethernet-Port dar, weil es das am weitesten verbreitete LAN-Protokoll ist, aber es gibt viele andere Arten von Ports, die abhängen von:

* Die Entfernung, über die das Medium die Informationen übertragen kann
* Die Umgebung, in der die Halterungen installiert sind
* Der Fluss
* Installationskosten

#### Virtuelle Schnittstelle

Eine virtuelle Schnittstelle (mit dem Namen SVI) ist in Cisco Layer 3- und höheren Systemen eine Möglichkeit, den Switch remote zu verwalten, und verfügt über eine IP-Adresse. Die standardmäßige virtuelle Schnittstelle ist Vlan1

Um eine virtuelle Schnittstelle zu konfigurieren, müssen Sie den Schnittstellenkonfigurationsmodus aufrufen, indem Sie den Namen der Schnittstelle angeben. Standardmäßig ist die virtuelle Schnittstelle „vlan1“, also rufen wir diesen Modus mit „vlan interface 1“ aus dem privilegierten Ausführungsmodus auf. Anschließend können Sie Ihre IP-Adresse mit dem Befehl `ip address
     
     
      `. On doit alors redémarrer l'interface avec la commande `no shutdown` > Exemple > ``` > Switch(config)# interface vlan 1 > Switch(config-if)# ip address 192.168.10.2 255.255.255.0 > Switch(config-if)# no shutdown > ``` ### Configuration IP La configuration de l'adresse IP peut se faire manuellement en spécifiant l'adresse et le masque dans les paramètres du système. Mais il peut aussi s'effectuer automatiquement en suivant le protocol DHCP permettant de demander a un serveur spécialisé une adresse IP et un masque. ### Tests et monitoring Sur une machine cisco, on peut executer diverses commandes permettant de tester ou de monitorer les interfaces. Pour afficher l'IP d'une interface on utilisera `show ip interface brief` depuis le mode d'execution privilegié. Cette commande affiche l'etat des interfaces de la machine et diverses informations à son sujet Pour tester la connexion d'une machine à une autre on utilisera la commade `ping` permettant de demander une reponse à la machine distante.
     
    
   
